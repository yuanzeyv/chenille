{"version":3,"sources":["file:///C:/Users/admin/NewProject_18/assets/Scripts/External/immer/utils/common.ts"],"names":["isDraft","value","isDraftable","isPlainObject","Array","isArray","constructor","isMap","isSet","proto","Object","getPrototypeOf","prototype","original","base_","each","obj","iter","enumerableOnly","getArchtype","keys","ownKeys","forEach","key","entry","index","thing","state","type_","has","prop","hasOwnProperty","call","get","set","propOrOldValue","t","delete","add","is","x","y","target","Map","Set","latest","copy_","shallowCopy","base","invokeGetters","slice","clone","create","desc","getOwnPropertyDescriptor","enumerable","defineProperty","writable","configurable","freeze","deep","isFrozen","clear","dontMutateFrozenCollections","DRAFT_STATE","DRAFTABLE","hasSet","hasMap","ArchtypeObject","ArchtypeArray","ArchtypeMap","ArchtypeSet","die","Reflect","getOwnPropertySymbols","getOwnPropertyNames","concat"],"mappings":";;;;;AAmBA;;AACA;AACO,WAASA,OAAT,CAAiBC,KAAjB,EAAsC;AAC5C,WAAO,CAAC,CAACA,KAAF,IAAW,CAAC,CAACA,KAAK;AAAA;AAAA,mCAAzB;AACA;AAED;;AACA;;;AACO,WAASC,WAAT,CAAqBD,KAArB,EAA0C;AAChD,QAAI,CAACA,KAAL,EAAY,OAAO,KAAP;AACZ,WACCE,aAAa,CAACF,KAAD,CAAb,IACAG,KAAK,CAACC,OAAN,CAAcJ,KAAd,CADA,IAEA,CAAC,CAACA,KAAK;AAAA;AAAA,+BAFP,IAGA,CAAC,CAACA,KAAK,CAACK,WAAN;AAAA;AAAA,+BAHF,IAIAC,KAAK,CAACN,KAAD,CAJL,IAKAO,KAAK,CAACP,KAAD,CANN;AAQA;AAED;;;AACO,WAASE,aAAT,CAAuBF,KAAvB,EAA4C;AAClD,QAAI,CAACA,KAAD,IAAU,OAAOA,KAAP,KAAiB,QAA/B,EAAyC,OAAO,KAAP;AACzC,UAAMQ,KAAK,GAAGC,MAAM,CAACC,cAAP,CAAsBV,KAAtB,CAAd;AACA,WAAO,CAACQ,KAAD,IAAUA,KAAK,KAAKC,MAAM,CAACE,SAAlC;AACA;AAED;;AACA;;;AAEO,WAASC,QAAT,CAAkBZ,KAAlB,EAA4C;AAClD,QAAIA,KAAK,IAAIA,KAAK;AAAA;AAAA,mCAAlB,EAAiC;AAChC,aAAOA,KAAK;AAAA;AAAA,qCAAL,CAAmBa,KAA1B;AACA,KAHiD,CAIlD;;AACA;AAED;;;AAgBO,WAASC,IAAT,CAAcC,GAAd,EAAwBC,IAAxB,EAAmCC,cAAc,GAAG,KAApD,EAA2D;AACjE,QAAIC,WAAW,CAACH,GAAD,CAAX;AAAA;AAAA,yCAAJ,EAAyC;AACxC;AAAC,OAACE,cAAc,GAAGR,MAAM,CAACU,IAAV,GAAiBC,OAAhC,EAAyCL,GAAzC,EAA8CM,OAA9C,CAAsDC,GAAG,IACzDN,IAAI,CAACM,GAAD,EAAMP,GAAG,CAACO,GAAD,CAAT,EAAgBP,GAAhB,CADJ;AAGD,KAJD,MAIO;AACNA,MAAAA,GAAG,CAACM,OAAJ,CAAY,CAACE,KAAD,EAAaC,KAAb,KAA4BR,IAAI,CAACQ,KAAD,EAAQD,KAAR,EAAeR,GAAf,CAA5C;AACA;AACD;AAED;;;AACO,WAASG,WAAT,CAAqBO,KAArB,EAAgD;AACtD;AACA,UAAMC,KAA6B,GAAGD,KAAK;AAAA;AAAA,mCAA3C;AACA,WAAOC,KAAK,GACTA,KAAK,CAACC,KAAN,GAAc,CAAd,GACCD,KAAK,CAACC,KAAN,GAAc,CADf,CACiB;AADjB,MAEED,KAAK,CAACC,KAHC,CAGa;AAHb,MAITxB,KAAK,CAACC,OAAN,CAAcqB,KAAd;AAAA;AAAA,yCAEAnB,KAAK,CAACmB,KAAD,CAAL;AAAA;AAAA,qCAEAlB,KAAK,CAACkB,KAAD,CAAL;AAAA;AAAA;AAAA;AAAA,wCARH;AAWA;AAED;;;AACO,WAASG,GAAT,CAAaH,KAAb,EAAyBI,IAAzB,EAAqD;AAC3D,WAAOX,WAAW,CAACO,KAAD,CAAX;AAAA;AAAA,sCACJA,KAAK,CAACG,GAAN,CAAUC,IAAV,CADI,GAEJpB,MAAM,CAACE,SAAP,CAAiBmB,cAAjB,CAAgCC,IAAhC,CAAqCN,KAArC,EAA4CI,IAA5C,CAFH;AAGA;AAED;;;AACO,WAASG,GAAT,CAAaP,KAAb,EAAwCI,IAAxC,EAAgE;AACtE;AACA,WAAOX,WAAW,CAACO,KAAD,CAAX;AAAA;AAAA,sCAAqCA,KAAK,CAACO,GAAN,CAAUH,IAAV,CAArC,GAAuDJ,KAAK,CAACI,IAAD,CAAnE;AACA;AAED;;;AACO,WAASI,GAAT,CAAaR,KAAb,EAAyBS,cAAzB,EAAsDlC,KAAtD,EAAkE;AACxE,UAAMmC,CAAC,GAAGjB,WAAW,CAACO,KAAD,CAArB;AACA,QAAIU,CAAC;AAAA;AAAA,mCAAL,EAAuBV,KAAK,CAACQ,GAAN,CAAUC,cAAV,EAA0BlC,KAA1B,EAAvB,KACK,IAAImC,CAAC;AAAA;AAAA,mCAAL,EAAuB;AAC3BV,MAAAA,KAAK,CAACW,MAAN,CAAaF,cAAb;AACAT,MAAAA,KAAK,CAACY,GAAN,CAAUrC,KAAV;AACA,KAHI,MAGEyB,KAAK,CAACS,cAAD,CAAL,GAAwBlC,KAAxB;AACP;AAED;;;AACO,WAASsC,EAAT,CAAYC,CAAZ,EAAoBC,CAApB,EAAqC;AAC3C;AACA,QAAID,CAAC,KAAKC,CAAV,EAAa;AACZ,aAAOD,CAAC,KAAK,CAAN,IAAW,IAAIA,CAAJ,KAAU,IAAIC,CAAhC;AACA,KAFD,MAEO;AACN,aAAOD,CAAC,KAAKA,CAAN,IAAWC,CAAC,KAAKA,CAAxB;AACA;AACD;AAED;;;AACO,WAASlC,KAAT,CAAemC,MAAf,EAA8C;AACpD,WAAO;AAAA;AAAA,6BAAUA,MAAM,YAAYC,GAAnC;AACA;AAED;;;AACO,WAASnC,KAAT,CAAekC,MAAf,EAA8C;AACpD,WAAO;AAAA;AAAA,6BAAUA,MAAM,YAAYE,GAAnC;AACA;AACD;;;AACO,WAASC,MAAT,CAAgBlB,KAAhB,EAAwC;AAC9C,WAAOA,KAAK,CAACmB,KAAN,IAAenB,KAAK,CAACb,KAA5B;AACA;AAED;;;AAKO,WAASiC,WAAT,CAAqBC,IAArB,EAAgCC,aAAa,GAAG,KAAhD,EAAuD;AAC7D,QAAI7C,KAAK,CAACC,OAAN,CAAc2C,IAAd,CAAJ,EAAyB,OAAOA,IAAI,CAACE,KAAL,EAAP;AACzB,UAAMC,KAAK,GAAGzC,MAAM,CAAC0C,MAAP,CAAc1C,MAAM,CAACC,cAAP,CAAsBqC,IAAtB,CAAd,CAAd;AACAjC,IAAAA,IAAI,CAACiC,IAAD,EAAQzB,GAAD,IAAc;AACxB,UAAIA,GAAG;AAAA;AAAA,qCAAP,EAAyB;AACxB,eADwB,CACjB;AACP;;AACD,YAAM8B,IAAI,GAAG3C,MAAM,CAAC4C,wBAAP,CAAgCN,IAAhC,EAAsCzB,GAAtC,CAAb;AACA,UAAI;AAACtB,QAAAA;AAAD,UAAUoD,IAAd;;AACA,UAAIA,IAAI,CAACpB,GAAT,EAAc;AACb,YAAI,CAACgB,aAAL,EAAoB;AAAA;AAAA,wBAAI,CAAJ;AACpBhD,QAAAA,KAAK,GAAGoD,IAAI,CAACpB,GAAL,CAASD,IAAT,CAAcgB,IAAd,CAAR;AACA;;AACD,UAAIK,IAAI,CAACE,UAAT,EAAqB;AACpBJ,QAAAA,KAAK,CAAC5B,GAAD,CAAL,GAAatB,KAAb;AACA,OAFD,MAEO;AACNS,QAAAA,MAAM,CAAC8C,cAAP,CAAsBL,KAAtB,EAA6B5B,GAA7B,EAAkC;AACjCtB,UAAAA,KADiC;AAEjCwD,UAAAA,QAAQ,EAAE,IAFuB;AAGjCC,UAAAA,YAAY,EAAE;AAHmB,SAAlC;AAKA;AACD,KAnBG,CAAJ;AAoBA,WAAOP,KAAP;AACA;;AAEM,WAASQ,MAAT,CAAgB3C,GAAhB,EAA0B4C,IAA1B,EAA+C;AACrD,QAAI5D,OAAO,CAACgB,GAAD,CAAP,IAAgB6C,QAAQ,CAAC7C,GAAD,CAAxB,IAAiC,CAACd,WAAW,CAACc,GAAD,CAAjD,EAAwD;;AACxD,QAAIG,WAAW,CAACH,GAAD,CAAX,GAAmB;AAAE;AAAzB,MAA2C;AAC1CA,MAAAA,GAAG,CAACkB,GAAJ,GAAUlB,GAAG,CAACsB,GAAJ,GAAUtB,GAAG,CAAC8C,KAAJ,GAAY9C,GAAG,CAACqB,MAAJ,GAAa0B,2BAA7C;AACA;;AACDrD,IAAAA,MAAM,CAACiD,MAAP,CAAc3C,GAAd;AACA,QAAI4C,IAAJ,EAAU7C,IAAI,CAACC,GAAD,EAAM,CAACO,GAAD,EAAMtB,KAAN,KAAgB0D,MAAM,CAAC1D,KAAD,EAAQ,IAAR,CAA5B,EAA2C,IAA3C,CAAJ;AACV;;AAED,WAAS8D,2BAAT,GAAuC;AACtC;AAAA;AAAA,oBAAI,CAAJ;AACA;;AAEM,WAASF,QAAT,CAAkB7C,GAAlB,EAAqC;AAC3C,QAAIA,GAAG,IAAI,IAAP,IAAe,OAAOA,GAAP,KAAe,QAAlC,EAA4C,OAAO,IAAP,CADD,CAE3C;;AACA,WAAON,MAAM,CAACmD,QAAP,CAAgB7C,GAAhB,CAAP;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aA7KehB,O;iBAMAE,W;mBAaAC,a;cASAU,Q;UAuBAE,I;iBAWAI,W;SAiBAU,G;SAOAI,G;SAMAC,G;QAUAK,E;WAUAhC,K;WAKAC,K;YAIAqC,M;iBASAE,W;YA0BAY,M;cAaAE;;;;;;;;;AA7LfG,MAAAA,W,iBAAAA,W;AACAC,MAAAA,S,iBAAAA,S;AACAC,MAAAA,M,iBAAAA,M;AAQAC,MAAAA,M,iBAAAA,M;AACAC,MAAAA,c,iBAAAA,c;AACAC,MAAAA,a,iBAAAA,a;AACAC,MAAAA,W,iBAAAA,W;AACAC,MAAAA,W,iBAAAA,W;AACAC,MAAAA,G,iBAAAA,G;;;;;;;yBAyCYnD,O,GACZ,OAAOoD,OAAP,KAAmB,WAAnB,IAAkCA,OAAO,CAACpD,OAA1C,GACGoD,OAAO,CAACpD,OADX,GAEG,OAAOX,MAAM,CAACgE,qBAAd,KAAwC,WAAxC,GACA1D,GAAG,IACHN,MAAM,CAACiE,mBAAP,CAA2B3D,GAA3B,EAAgC4D,MAAhC,CACClE,MAAM,CAACgE,qBAAP,CAA6B1D,GAA7B,CADD,CAFA;AAKA;AAA2BN,MAAAA,MAAM,CAACiE,mB","sourcesContent":["import {\n\tDRAFT_STATE,\n\tDRAFTABLE,\n\thasSet,\n\tObjectish,\n\tDrafted,\n\tAnyObject,\n\tAnyArray,\n\tAnyMap,\n\tAnySet,\n\tImmerState,\n\thasMap,\n\tArchtypeObject,\n\tArchtypeArray,\n\tArchtypeMap,\n\tArchtypeSet,\n\tdie\n} from \"../internal\"\n\n/** Returns true if the given value is an Immer draft */\n/*#__PURE__*/\nexport function isDraft(value: any): boolean {\n\treturn !!value && !!value[DRAFT_STATE]\n}\n\n/** Returns true if the given value can be drafted by Immer */\n/*#__PURE__*/\nexport function isDraftable(value: any): boolean {\n\tif (!value) return false\n\treturn (\n\t\tisPlainObject(value) ||\n\t\tArray.isArray(value) ||\n\t\t!!value[DRAFTABLE] ||\n\t\t!!value.constructor[DRAFTABLE] ||\n\t\tisMap(value) ||\n\t\tisSet(value)\n\t)\n}\n\n/*#__PURE__*/\nexport function isPlainObject(value: any): boolean {\n\tif (!value || typeof value !== \"object\") return false\n\tconst proto = Object.getPrototypeOf(value)\n\treturn !proto || proto === Object.prototype\n}\n\n/** Get the underlying object that is represented by the given draft */\n/*#__PURE__*/\nexport function original<T>(value: T): T | undefined\nexport function original(value: Drafted<any>): any {\n\tif (value && value[DRAFT_STATE]) {\n\t\treturn value[DRAFT_STATE].base_ as any\n\t}\n\t// otherwise return undefined\n}\n\n/*#__PURE__*/\nexport const ownKeys: (target: AnyObject) => PropertyKey[] =\n\ttypeof Reflect !== \"undefined\" && Reflect.ownKeys\n\t\t? Reflect.ownKeys\n\t\t: typeof Object.getOwnPropertySymbols !== \"undefined\"\n\t\t? obj =>\n\t\t\t\tObject.getOwnPropertyNames(obj).concat(\n\t\t\t\t\tObject.getOwnPropertySymbols(obj) as any\n\t\t\t\t)\n\t\t: /* istanbul ignore next */ Object.getOwnPropertyNames\n\nexport function each<T extends Objectish>(\n\tobj: T,\n\titer: (key: string | number, value: any, source: T) => void,\n\tenumerableOnly?: boolean\n): void\nexport function each(obj: any, iter: any, enumerableOnly = false) {\n\tif (getArchtype(obj) === ArchtypeObject) {\n\t\t;(enumerableOnly ? Object.keys : ownKeys)(obj).forEach(key =>\n\t\t\titer(key, obj[key], obj)\n\t\t)\n\t} else {\n\t\tobj.forEach((entry: any, index: any) => iter(index, entry, obj))\n\t}\n}\n\n/*#__PURE__*/\nexport function getArchtype(thing: any): 0 | 1 | 2 | 3 {\n\t/* istanbul ignore next */\n\tconst state: undefined | ImmerState = thing[DRAFT_STATE]\n\treturn state\n\t\t? state.type_ > 3\n\t\t\t? state.type_ - 4 // cause Object and Array map back from 4 and 5\n\t\t\t: (state.type_ as any) // others are the same\n\t\t: Array.isArray(thing)\n\t\t? ArchtypeArray\n\t\t: isMap(thing)\n\t\t? ArchtypeMap\n\t\t: isSet(thing)\n\t\t? ArchtypeSet\n\t\t: ArchtypeObject\n}\n\n/*#__PURE__*/\nexport function has(thing: any, prop: PropertyKey): boolean {\n\treturn getArchtype(thing) === ArchtypeMap\n\t\t? thing.has(prop)\n\t\t: Object.prototype.hasOwnProperty.call(thing, prop)\n}\n\n/*#__PURE__*/\nexport function get(thing: AnyMap | AnyObject, prop: PropertyKey): any {\n\t// @ts-ignore\n\treturn getArchtype(thing) === ArchtypeMap ? thing.get(prop) : thing[prop]\n}\n\n/*#__PURE__*/\nexport function set(thing: any, propOrOldValue: PropertyKey, value: any) {\n\tconst t = getArchtype(thing)\n\tif (t === ArchtypeMap) thing.set(propOrOldValue, value)\n\telse if (t === ArchtypeSet) {\n\t\tthing.delete(propOrOldValue)\n\t\tthing.add(value)\n\t} else thing[propOrOldValue] = value\n}\n\n/*#__PURE__*/\nexport function is(x: any, y: any): boolean {\n\t// From: https://github.com/facebook/fbjs/blob/c69904a511b900266935168223063dd8772dfc40/packages/fbjs/src/core/shallowEqual.js\n\tif (x === y) {\n\t\treturn x !== 0 || 1 / x === 1 / y\n\t} else {\n\t\treturn x !== x && y !== y\n\t}\n}\n\n/*#__PURE__*/\nexport function isMap(target: any): target is AnyMap {\n\treturn hasMap && target instanceof Map\n}\n\n/*#__PURE__*/\nexport function isSet(target: any): target is AnySet {\n\treturn hasSet && target instanceof Set\n}\n/*#__PURE__*/\nexport function latest(state: ImmerState): any {\n\treturn state.copy_ || state.base_\n}\n\n/*#__PURE__*/\nexport function shallowCopy<T extends AnyObject | AnyArray>(\n\tbase: T,\n\tinvokeGetters?: boolean\n): T\nexport function shallowCopy(base: any, invokeGetters = false) {\n\tif (Array.isArray(base)) return base.slice()\n\tconst clone = Object.create(Object.getPrototypeOf(base))\n\teach(base, (key: any) => {\n\t\tif (key === DRAFT_STATE) {\n\t\t\treturn // Never copy over draft state.\n\t\t}\n\t\tconst desc = Object.getOwnPropertyDescriptor(base, key)!\n\t\tlet {value} = desc\n\t\tif (desc.get) {\n\t\t\tif (!invokeGetters) die(1)\n\t\t\tvalue = desc.get.call(base)\n\t\t}\n\t\tif (desc.enumerable) {\n\t\t\tclone[key] = value\n\t\t} else {\n\t\t\tObject.defineProperty(clone, key, {\n\t\t\t\tvalue,\n\t\t\t\twritable: true,\n\t\t\t\tconfigurable: true\n\t\t\t})\n\t\t}\n\t})\n\treturn clone\n}\n\nexport function freeze(obj: any, deep: boolean): void {\n\tif (isDraft(obj) || isFrozen(obj) || !isDraftable(obj)) return\n\tif (getArchtype(obj) > 1 /* Map or Set */) {\n\t\tobj.set = obj.add = obj.clear = obj.delete = dontMutateFrozenCollections as any\n\t}\n\tObject.freeze(obj)\n\tif (deep) each(obj, (key, value) => freeze(value, true), true)\n}\n\nfunction dontMutateFrozenCollections() {\n\tdie(2)\n}\n\nexport function isFrozen(obj: any): boolean {\n\tif (obj == null || typeof obj !== \"object\") return true\n\t// See #600, IE dies on non-objects in Object.isFrozen\n\treturn Object.isFrozen(obj)\n}\n"]}